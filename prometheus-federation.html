<!DOCTYPE html>
<html lang="en">

<head>
	<title>Prometheus Federation Article</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="author" content="">
	<meta name="keywords" content="">
	<meta name="description" content="">
	<link rel="stylesheet" type="text/css" href="css/vendor.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="style.css">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;700;900&display=swap" rel="stylesheet">
</head>

<body class="bg-body homepage post-template">
	<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
		<defs>
			<symbol xmlns="http://www.w3.org/2000/svg" id="instagram" viewBox="0 0 15 15">
				<path fill="none" stroke="currentColor"
					d="M11 3.5h1M4.5.5h6a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4h-6a4 4 0 0 1-4-4v-6a4 4 0 0 1 4-4Zm3 10a3 3 0 1 1 0-6a3 3 0 0 1 0 6Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="facebook" viewBox="0 0 15 15">
				<path fill="none" stroke="currentColor"
					d="M7.5 14.5a7 7 0 1 1 0-14a7 7 0 0 1 0 14Zm0 0v-8a2 2 0 0 1 2-2h.5m-5 4h5" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="twitter" viewBox="0 0 15 15">
				<path fill="currentColor"
					d="m14.478 1.5l.5-.033a.5.5 0 0 0-.871-.301l.371.334Zm-.498 2.959a.5.5 0 1 0-1 0h1Zm-6.49.082h-.5h.5Zm0 .959h.5h-.5Zm-6.99 7V12a.5.5 0 0 0-.278.916L.5 12.5Zm.998-11l.469-.175a.5.5 0 0 0-.916-.048l.447.223Zm3.994 9l.354.353a.5.5 0 0 0-.195-.827l-.159.474Zm7.224-8.027l-.37.336l.18.199l.265-.04l-.075-.495Zm1.264-.94c.051.778.003 1.25-.123 1.606c-.122.345-.336.629-.723 1l.692.722c.438-.42.776-.832.974-1.388c.193-.546.232-1.178.177-2.006l-.998.066Zm0 3.654V4.46h-1v.728h1Zm-6.99-.646V5.5h1v-.959h-1Zm0 .959V6h1v-.5h-1ZM10.525 1a3.539 3.539 0 0 0-3.537 3.541h1A2.539 2.539 0 0 1 10.526 2V1Zm2.454 4.187C12.98 9.503 9.487 13 5.18 13v1c4.86 0 8.8-3.946 8.8-8.813h-1ZM1.03 1.675C1.574 3.127 3.614 6 7.49 6V5C4.174 5 2.421 2.54 1.966 1.325l-.937.35Zm.021-.398C.004 3.373-.157 5.407.604 7.139c.759 1.727 2.392 3.055 4.73 3.835l.317-.948c-2.155-.72-3.518-1.892-4.132-3.29c-.612-1.393-.523-3.11.427-5.013l-.895-.446Zm4.087 8.87C4.536 10.75 2.726 12 .5 12v1c2.566 0 4.617-1.416 5.346-2.147l-.708-.706Zm7.949-8.009A3.445 3.445 0 0 0 10.526 1v1c.721 0 1.37.311 1.82.809l.74-.671Zm-.296.83a3.513 3.513 0 0 0 2.06-1.134l-.744-.668a2.514 2.514 0 0 1-1.466.813l.15.989ZM.222 12.916C1.863 14.01 3.583 14 5.18 14v-1c-1.63 0-3.048-.011-4.402-.916l-.556.832Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="pinterest" viewBox="0 0 15 15">
				<path fill="none" stroke="currentColor"
					d="m4.5 13.5l3-7m-3.236 3a2.989 2.989 0 0 1-.764-2V7A3.5 3.5 0 0 1 7 3.5h1A3.5 3.5 0 0 1 11.5 7v.5a3 3 0 0 1-3 3a2.081 2.081 0 0 1-1.974-1.423L6.5 9m1 5.5a7 7 0 1 1 0-14a7 7 0 0 1 0 14Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="youtube" viewBox="0 0 15 15">
				<path fill="currentColor"
					d="m1.61 12.738l-.104.489l.105-.489Zm11.78 0l.104.489l-.105-.489Zm0-10.476l.104-.489l-.105.489Zm-11.78 0l.106.489l-.105-.489ZM6.5 5.5l.277-.416A.5.5 0 0 0 6 5.5h.5Zm0 4H6a.5.5 0 0 0 .777.416L6.5 9.5Zm3-2l.277.416a.5.5 0 0 0 0-.832L9.5 7.5ZM0 3.636v7.728h1V3.636H0Zm15 7.728V3.636h-1v7.728h1ZM1.506 13.227c3.951.847 8.037.847 11.988 0l-.21-.978a27.605 27.605 0 0 1-11.568 0l-.21.978ZM13.494 1.773a28.606 28.606 0 0 0-11.988 0l.21.978a27.607 27.607 0 0 1 11.568 0l.21-.978ZM15 3.636c0-.898-.628-1.675-1.506-1.863l-.21.978c.418.09.716.458.716.885h1Zm-1 7.728a.905.905 0 0 1-.716.885l.21.978A1.905 1.905 0 0 0 15 11.364h-1Zm-14 0c0 .898.628 1.675 1.506 1.863l.21-.978A.905.905 0 0 1 1 11.364H0Zm1-7.728c0-.427.298-.796.716-.885l-.21-.978A1.905 1.905 0 0 0 0 3.636h1ZM6 5.5v4h1v-4H6Zm.777 4.416l3-2l-.554-.832l-3 2l.554.832Zm3-2.832l-3-2l-.554.832l3 2l.554-.832Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="dribble" viewBox="0 0 15 15">
				<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
					d="M4.839 1.024c3.346 4.041 5.096 7.922 5.704 12.782M.533 6.82c5.985-.138 9.402-1.083 11.97-4.216M2.7 12.594c3.221-4.902 7.171-5.65 11.755-4.293M14.5 7.5a7 7 0 1 0-14 0a7 7 0 0 0 14 0Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="arrow-right" viewBox="0 0 24 24">
				<path fill="currentColor"
					d="M17.92 11.62a1 1 0 0 0-.21-.33l-5-5a1 1 0 0 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l5-5a1 1 0 0 0 .21-.33a1 1 0 0 0 0-.76Z" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="folder" viewBox="0 0 18 18" fill="none">
				<path
					d="M14.0946 4.04689H9.56953L9.33895 3.3259C9.18947 2.90285 8.9122 2.53678 8.54555 2.27842C8.1789 2.02006 7.74102 1.8822 7.29258 1.88393H4.00687C3.43356 1.88393 2.88374 2.11181 2.47835 2.51744C2.07296 2.92308 1.84521 3.47324 1.84521 4.04689V13.4197C1.84521 13.9934 2.07296 14.5435 2.47835 14.9492C2.88374 15.3548 3.43356 15.5827 4.00687 15.5827H14.0946C14.6679 15.5827 15.2177 15.3548 15.6231 14.9492C16.0285 14.5435 16.2562 13.9934 16.2562 13.4197V6.20985C16.2562 5.6362 16.0285 5.08604 15.6231 4.68041C15.2177 4.27477 14.6679 4.04689 14.0946 4.04689ZM14.8151 13.4197C14.8151 13.6109 14.7392 13.7943 14.6041 13.9295C14.469 14.0648 14.2857 14.1407 14.0946 14.1407H4.00687C3.81577 14.1407 3.63249 14.0648 3.49736 13.9295C3.36223 13.7943 3.28632 13.6109 3.28632 13.4197V4.04689C3.28632 3.85567 3.36223 3.67229 3.49736 3.53707C3.63249 3.40186 3.81577 3.3259 4.00687 3.3259H7.29258C7.44364 3.32551 7.591 3.37264 7.71384 3.46061C7.83667 3.54859 7.92877 3.67297 7.97711 3.81617L8.3662 4.99859C8.41454 5.1418 8.50664 5.26618 8.62947 5.35415C8.75231 5.44213 8.89967 5.48925 9.05073 5.48886H14.0946C14.2857 5.48886 14.469 5.56483 14.6041 5.70004C14.7392 5.83525 14.8151 6.01863 14.8151 6.20985V13.4197Z"
					fill="black" />
			</symbol>
			<symbol xmlns="http://www.w3.org/2000/svg" id="clock" viewBox="0 0 18 18" fill="none">
				<path
					d="M11.0931 9.19042L9.58134 8.3173V5.12838C9.58134 4.93716 9.50543 4.75377 9.3703 4.61856C9.23517 4.48335 9.05189 4.40739 8.86079 4.40739C8.66969 4.40739 8.48641 4.48335 8.35128 4.61856C8.21615 4.75377 8.14024 4.93716 8.14024 5.12838V8.73331C8.14024 8.85987 8.17354 8.9842 8.23678 9.0938C8.30002 9.2034 8.39098 9.29441 8.50051 9.35769L10.3725 10.4392C10.4545 10.4873 10.5452 10.5186 10.6393 10.5315C10.7335 10.5444 10.8292 10.5385 10.9211 10.5142C11.013 10.4899 11.0991 10.4477 11.1746 10.3899C11.2501 10.3322 11.3134 10.26 11.3609 10.1777C11.4084 10.0953 11.4392 10.0044 11.4515 9.91012C11.4637 9.81583 11.4572 9.72004 11.4323 9.62828C11.4074 9.53652 11.3646 9.45059 11.3064 9.37544C11.2482 9.3003 11.1757 9.23741 11.0931 9.19042ZM8.86079 1.52344C7.43567 1.52344 6.04256 1.94629 4.85762 2.73852C3.67268 3.53075 2.74913 4.65678 2.20376 5.97421C1.6584 7.29165 1.5157 8.74131 1.79373 10.1399C2.07175 11.5385 2.75801 12.8231 3.76572 13.8315C4.77343 14.8398 6.05733 15.5265 7.45506 15.8047C8.8528 16.0828 10.3016 15.9401 11.6182 15.3944C12.9349 14.8487 14.0602 13.9246 14.852 12.7389C15.6437 11.5532 16.0663 10.1593 16.0663 8.73331C16.0642 6.82178 15.3044 4.98914 13.9535 3.63748C12.6027 2.28582 10.7712 1.52554 8.86079 1.52344ZM8.86079 14.5012C7.7207 14.5012 6.60621 14.1629 5.65826 13.5291C4.7103 12.8954 3.97146 11.9945 3.53517 10.9406C3.09887 9.88665 2.98472 8.72691 3.20714 7.60805C3.42956 6.48919 3.97857 5.46145 4.78474 4.65479C5.5909 3.84814 6.61802 3.2988 7.73621 3.07624C8.8544 2.85369 10.0134 2.96791 11.0667 3.40447C12.12 3.84103 13.0203 4.58031 13.6537 5.52884C14.2871 6.47737 14.6252 7.59253 14.6252 8.73331C14.6233 10.2625 14.0154 11.7284 12.9347 12.8097C11.8541 13.891 10.389 14.4993 8.86079 14.5012Z"
					fill="black" />
			</symbol>
		</defs>
	</svg>

	<a class="menu-btn"><span></span></a>

	<div class="container-fluid">

		<header id="header-nav" class="col-lg-2 position-fixed px-5 bg-white h-100">
			<div class="header-wrap d-flex flex-column justify-content-between h-100">
				<div class="navigation">
					<div class="site-logo mt-5">
						<a href="index.html">
							<img src="images/main-logo.png" alt="logo" class="img-fluid">
						</a>
					</div>

					<nav id="one-page-menu" class="vertical-menu my-5">
						<ul class="menu-list list-unstyled">
							<li><a href="index.html#billboard" class="nav-link">Home</a></li>
							<li><a href="index.html#biodata" class="nav-link">Biodata</a></li>
							<li><a href="index.html#experience" class="nav-link">Experience</a></li>
							<li><a href="index.html#portfolio" class="nav-link">Articles</a></li>
							<li><a href="index.html#contact" class="nav-link">Contact</a></li>
							<li>
								<a class="nav-link btn-toggle d-flex justify-content-between align-items-center collapsed"
									data-bs-toggle="collapse" data-bs-target="#pages-collapse" aria-expanded="false">
									Pages
								</a>
								<div id="pages-collapse" class="collapse">
									<ul class="list-unstyled py-3">
										<li>
											<a href="mesos-aurora.html">Mesos Aurora</a>
										</li>
										<li>
											<a href="k8s-versions.html">K8s Versions</a>
										</li>
										<li>
											<a href="kafka-partition-consumer.html">Kafka Partition count & Consumers</a>
										</li>
                    					<li>
											<a href="k8s-TF-upgrade.html">K8s Upgrade using TF</a>
										</li>
                    					<li>
											<a href="prometheus-federation.html">Prometheus Federation</a>
										</li>
										<!-- <li>
											<a href="blog.html">Blog <span class="badge bg-primary">PRO</span></a>
										</li> -->
									</ul>
								</div>
							</li>
						</ul>
					</nav>
				</div>
				<div class="mt-5">
					<div class="email-links">
						<a href="mailto:akki2790@gmail.com" class="py-3 my-3 border-bottom d-flex">akki2790@gmail.com</a>
					</div>
					<!-- <ul class="list-unstyled d-flex justify-content-start flex-wrap gap-3">
						<li>
							<a href="#" class="text-dark">
								<svg width="24" height="24" viewBox="0 0 24 24">
									<use xlink:href="#facebook"></use>
								</svg>
							</a>
						</li>
						<li>
							<a href="#" class="text-dark">
								<svg width="24" height="24" viewBox="0 0 24 24">
									<use xlink:href="#twitter"></use>
								</svg>
							</a>
						</li>
						<li>
							<a href="#" class="text-dark">
								<svg width="24" height="24" viewBox="0 0 24 24">
									<use xlink:href="#youtube"></use>
								</svg>
							</a>
						</li>
						<li>
							<a href="#" class="text-dark">
								<svg width="24" height="24" viewBox="0 0 24 24">
									<use xlink:href="#pinterest"></use>
								</svg>
							</a>
						</li>
						<li>
							<a href="#" class="text-dark">
								<svg width="24" height="24" viewBox="0 0 24 24">
									<use xlink:href="#instagram"></use>
								</svg>
							</a>
						</li>
					</ul> -->
				</div>
			</div>
		</header>

		<main class="col-lg-10 offset-lg-2">
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-lg-8">

						<section class="pt-5 mt-5" data-aos="fade-up">
							<div class="post-meta d-flex gap-3 my-4">
								<span class="post-category">
									<svg width="16" height="16" viewBox="0 0 24 24">
										<use xlink:href="#folder"></use>
									</svg>
									Blog </span>
								<span class="meta-day">
									<svg width="16" height="16" viewBox="0 0 24 24">
										<use xlink:href="#clock"></use>
									</svg>XX-XX-XXXX </span>
							</div>
							<h1 class="display-4 txt-fx slide-up">Prometheus Federation</h1>
							<img src="images/prom-horizontal.png" alt="single post" class="img-fluid my-4">
						</section>

						<article class="post-item" data-aos="fade-up" data-aos-delay="100">

							<div class="post-content py-5">
								<div class="post-description">
									<h3 class="info-title">What is Federation?</h3>
									<p>The term federation refers to a organizational system in which multiple smaller entities (such as states, regions, or organizations) come together to form a larger, unified entity while retaining some level of individual autonomy.</p>
									<p>In a political context, it typically involves a shared central government with member states under it; but each member still maintains its own independence in certain areas. (like policies, rules and state taxes etc) In an organizational context, federation can refer to a group of entities that join together to pursue common goal while maintaining their separate identities. For example, in sports, a federation might be an umbrella organization that coordinates the activities of various member teams or leagues.</p>
									<h3 class="info-title">Federation in Prometheus</h3>
									<p>In context of the Prometheus monitoring system, federation refers to the ability to scale monitoring by collecting and aggregating metrics from multiple Prometheus servers. It enables hierarchical or multi-level monitoring by allowing one Prometheus server (often called a federation server or mother-ship) to scrape selected time series from other Prometheus servers.</p>
									<p>This is particularly useful in large-scale deployments where you have multiple independent Prometheus instances monitoring different parts of an infrastructure. With federation you can aggregate and centralize those metrics for broader analysis.</p>
									<h5>Benefits of federation in Prometheus:</h5>
									<ul class="inner-list">
										<li> <strong>Aggregation:</strong> A federating Prometheus server can pull metrics from multiple child servers, providing a global view of metrics across multiple regions, sub-systems, environments or accounts.</li>
										<li> <strong>Selective Scraping:</strong> With federation you can select which metrics to scrape from the child servers. This is useful for saving network bandwidth and reducing data overhead. Usually, you want to collect only high-level or aggregated metrics, while detailed, granular data remains on the child servers.</li>
										<li> <strong>Hierarchical Monitoring:</strong> Federation enables a multi-tier setup where lower-level Prometheus instances handle detailed, local monitoring, and higher-level servers handle aggregated metrics, providing better scalability.</li>
										<li> <strong>Reduced Load:</strong> By scraping only aggregated or specific metrics at the federation level, you can reduce the amount of data transferred, making the system more efficient.</li>
									</ul>
									<p>For example, in a large organization, each data center or environment might have its own Prometheus instance. A central Prometheus server can federate metrics from each of these child instances to provide an aggregated overview of the entire system's health and performance, without needing to scrape every individual metric.</p>
									<p>Federation is configured by adding scrape_config entries in the Prometheus configuration, specifying which metrics to scrape from the target or remote servers.</p>
									<h5>Example configuration: </h5>
									<pre>
										<code>
scrape_configs:
  - job_name: 'federation'
      scrape_interval: 5m
	  honor_labels: true
	  metrics_path: '/federate'
	  params:
		'match[]':
		  - '{job="node"}'
		  - 'up'
	  static_configs:
		- targets:
		  - 'prometheus-server-1:9090'
	  	  - ‘prometheus-server-2:9090'
										</code>
									</pre>
									<p>In this example, the federation server only scrapes the up and {job="node"} metrics from two child Prometheus servers. (prometheus-server-1 and prometheus-server-2)</p>
									<h3 class="info-title">A Real-World Example</h3>
									<p>Consider a large-scale global e-commerce platform like eBay, which has multiple data centers spread across different regions around the world. Its platform might consists of thousands of microservices, and other system components deployed across these data centers. The system would likely involve many geographically distributed backend services for handling:</p>
									<ul class="inner-list">
										<li> Web applications (e.g., product pages, cart, checkout, sellers, reviews, product suggestions etc)</li>
										<li> Databases (SQL, NoSQL)</li>
										<li> Messaging systems (e.g., Kafka, RabbitMQ)</li>
										<li> Storage services (e.g., Amazon S3)</li>
										<li> Cacheing systems (e.g., memcached, redis)</li>
										<li> Payment gateways</li>
										<li> Third-party API integrations</li>
										<li> CDNs and load balancers to manage traffic</li>
									</ul>
									<p>Given the criticality of the platform, the size and complexity of its infrastructure, monitoring each component becomes crucial for ensuring smooth operation, optimum performance, and uptime. This is where Prometheus federation becomes a necessity for scaling the monitoring system efficiently and effectively.</p>
									<p>This global e-commerce platform will have hundreds of microservices, application servers, database servers, and network devices all spread across the world. <strong>Given the scale we’re dealing with, having a single Prometheus instance collecting metrics from every application, server and network device across the world becomes impractical due to</strong>:</p>
									<ul class="inner-list">
										<li> <strong>High Latency:</strong> Scraping all global metrics from a single central Prometheus server would lead to high network latencies, especially between geographically distant data centers.</li>
										<li> <strong>Scalability:</strong> A single Prometheus server will struggle with the load of collecting and storing millions of time-series metrics.</li>
										<li> <strong>Fault Tolerance:</strong> the entire global monitoring system will go blind if this single Prometheus server fails. This will lead to missed alerts and degraded operational insights. Troubleshooting for issues could become impossible in this situation.</li>
									</ul>
									<p>To overcome these shortcomings, Prometheus federation can be used to build a <strong>hierarchical monitoring architecture.</strong> Let’s go through the design and architecture of such a monitoring system.</p>
									<h5>Federation Architecture</h5>
									<p>1. <strong>Regional Prometheus Instances (Child Servers):</strong></p>
									<ul class="inner-list">
										<li> Each region (and the resp. Infrastructure) will have <strong>its own Prometheus instance</strong> dedicated to monitoring the local services.</li>
										<li> These regional prometheus instances also scrape granular system metrics and other KPIs (e.g., CPU usage, memory, disk I/O, response times, request rates, user traffic, new signups per day etc) from infrastructure in their respective region and store them locally</li>
									</ul>
									<p>2. <strong>Global Prometheus Instance (Federation Server):</strong></p>
									<ul class="inner-list">
										<li> A central Prometheus instance is set up to federate high-level, aggregated metrics from the regional Prometheus instances. This instance is responsible for global monitoring, incident response, and alerting.</li>
										<li> It doesn’t scrape the detailed time series data but rather focuses on metrics like:</li>
										<ul class="inner-list">
											<li><strong>Service availability</strong> (e.g., is the checkout microservice up in all regions?)</li>
											<li><strong>Response time summaries</strong> (e.g., p99 latency of the API gateways across the globe</li>
											<li><strong>Error rates</strong> (e.g., 5xx error rates in the North American region)</li>
											<li><strong>Aggregated resource utilization</strong> (e.g., overall CPU and memory usage trends in each region)</li>
										</ul>
										<li>This global instance can be used by platform engineers and SREs who need a high-level overview of the system's health worldwide.</li>
									</ul>
									<h5>The system and infrastructure we need to monitor:</h5>
									<p>Lets dive deeper into what this monitoring system needs to monitor and how it will accomplish this for our global e-commerce platform:</p>
									<ul class="inner-list">
										<li> <strong>North America Region:</strong></li>
										<ul class="inner-list">
											<li>Services: Checkout (microservice), Payment Gateway, Regional Shipping Service.</li>
											<li>Infrastructure: 500 servers (both physical and virtual), databases, caching layers.</li>
											<li>The Prometheus server in North America scrapes granular system and service metrics for all these servers and applications, and stores detailed time-series data locally.</li>
										</ul>
										<li> <strong>Europe Region:</strong></li>
										<ul class="inner-list">
											<li>Services: Checkout, European Payment Gateway, Regional Shipping Service.</li>
											<li>Infrastructure: 300 servers, databases, storage services.</li>
											<li>The Europe Prometheus instance scrapes and stores similar detailed metrics, but only for the applications and infrastructure in Europe.</li>
										</ul>
										<li> <strong>Asia Region:</strong></li>
										<ul class="inner-list">
											<li>Services: Checkout, Analytics, Payment Processing.</li>
											<li>Infrastructure: 1000 servers, NoSQL databases, queuing systems.</li>
											<li>The Asia Prometheus instance focuses on monitoring microservices, queuing systems and databases within the Asian data centers.</li>
										</ul>
									</ul>
									<h5>The Federation Server</h5>
									<ul class="inner-list">
										<li> Our <strong>central federation prometheus server</strong> is configured to scrape aggregated metrics from each of these regional Prometheus instances.</li>
										<li> For example, the global Prometheus instance scrapes metrics from each region by querying only the high-level metrics it cares about. It might pull:</li>
										<ul class="inner-list">
											<li>The up metric for all services to check their availability.</li>
											<li>Aggregated error rates. (http_requests_total where status=5xx).</li>
											<li>High-level latency metrics. (e.g., http_request_duration_seconds).</li>
											<li>Saturation or resource usage like node_cpu_seconds_total aggregated across all nodes in a region.</li>
										</ul>
									</ul>
									<pre>
										<code>
scrape_configs:
  - job_name: 'federation'
	scrape_interval: 5m
	honor_labels: true
	metrics_path: '/federate'
	params:
	  'match[]':
	    - '{job="checkout"}'
	    - 'up'
	    - 'http_requests_total{status="5xx"}'
	    - 'http_request_duration_seconds'
	static_configs:
	  - targets:
	    - 'prometheus-northamerica.example.com:9090'
	    - 'prometheus-europe.example.com:9090'
	    - 'prometheus-asia.example.com:9090'								  
										</code>
									</pre>
									<h5>Benefits of Federation in this scenario:</h5>
									<ul class="inner-list">
										<li> <strong>Scalability:</strong> Each regional Prometheus server handles its own local metrics load. The global Prometheus only scrapes aggregated data, reducing the load on both the network and the Global Prometheus instance itself</li>
										<li> <strong>Low Latency:</strong> Each region’s metrics are collected locally, avoiding cross-region network delays. More granular monitoring and alerting can happen at the local level. The global Prometheus only fetches summary data from each region, which is much smaller in volume.</li>
										<li> <strong>Fault Isolation:</strong> If a regional Prometheus server goes down, only the monitoring for that region is affected. The global monitoring system still functions and alerts about the regional failure. We can also add a backup global prometheus server for redundancy.</li>
										<li> <strong>Global Visibility:</strong> The federation server provides a high-level global view, enabling stakeholders to see the overall health and trends of the system across different regions. This is crucial for executives, SREs, and global incident response teams.</li>
										<li> <strong>Efficiency:</strong> Only the essential, aggregated metrics are sent to the global instance. This avoids data overload and makes it easier to manage the large-scale monitoring infrastructure.</li>
									</ul>
									<h3 class="info-title">Summary</h3>
									<p>Prometheus federation is a powerful technique for monitoring large-scale, globally distributed infrastructures like that of a global e-commerce platform. By leveraging federation, the monitoring system becomes highly scalable, efficient, and fault-tolerant, enabling real-time insights into the platform's health across different geographic regions without overwhelming the system with unnecessary granular data.</p>
									<div class="post-bottom-link d-flex justify-content-between">
										<div class="block-social-links d-flex align-items-baseline">
											<div class="element-title text-uppercase">Share:</div>
											<ul class="list-unstyled d-flex gap-2">
												<li>
													<a href="#" class="btn btn-light">Linkedin</a>
												</li>
												<li>
													<a href="#" class="btn btn-light">Twitter</a>
												</li>
												<li>
													<a href="#" class="btn btn-light">Facebook</a>
												</li>
												<li>
													<a href="#" class="btn btn-light">Threads</a>
												</li>
											</ul>
										</div>
									</div>
								</div>
								<!-- <div id="single-post-navigation" class="mt-5">    # add links to prev and next articles
									<div class="post-navigation d-flex justify-content-between">
										<a itemprop="url" class="post-prev" href="#">
											<span class="text-muted">Previous</span>
											<h2 class="page-nav-title">Top 10 fashion trend for summer</h2>
										</a>
										<a itemprop="url" class="post-next text-end" href="#">
											<span class="text-muted">Next</span>
											<h2 class="page-nav-title">Crazy fashion with unique moment</h2>
										</a>
									</div>
								</div> -->
							</div>
						</article>

						<!-- <div id="post-author-info" class="border-top border-bottom py-4">  # about the author (me)
							<div class="row d-flex align-items-center">
								<div class="col-lg-3">
									<div class="image-holder">
										<a itemprop="url" href="#">
											<img src="images/author-image.jpg" class="img-fluid rounded-circle"
												alt="author">
										</a>
									</div>
								</div>
								<div class="col-lg-9">
									<div class="post-author-content">
										<div class="element-title d-flex align-items-center gap-3">
											<h4><a itemprop="url" href="">Anna Younes</a></h4>
											<span class="author-position"><em>Fashion Designer</em></span>
										</div>
										<p>Nascetur libero elementum adipiscing mauris maecenas et magna. Etiam nec,
											rutrum a diam lacus, nunc integer etiam. Mattis pulvinar non viverra donec
											pellentesque. Odio mi consequat libero dolor. Porta ut diam lobortis eget
											leo, lectus. Tortor diam dignissim amet, in interdum aliquet. Magnis dictum
											et eros purus fermentum, massa ullamcorper sit sollicitudin.</p>
									</div>
								</div>
							</div>
						</div> -->

						<!-- <div class="section-header mt-5">
							<h2 class="section-title">Related Posts</h2>
						</div>section-header -->

						<!-- <div class="row">
							<div class="col-lg-6">
								<article class="post-item pb-5">
									<div class="post-meta d-flex gap-3 my-4">
										<span class="post-category">
											<svg width="16" height="16" viewBox="0 0 24 24">
												<use xlink:href="#folder"></use>
											</svg>
											Blog </span>
										<span class="meta-day">
											<svg width="16" height="16" viewBox="0 0 24 24">
												<use xlink:href="#clock"></use>
											</svg>27-10-2024 </span>
									</div>
									<div class="post-image">
										<img src="images/post-image1.jpg" alt="image" class="post-grid-image img-fluid">
									</div>
									<div class="post-content">
										<h3 class="post-title my-4">
											<a href="single-post.html">Best rules to follow for achieving business
												goals</a>
										</h3>
										<p>Business migration into the cloud has been one of the most boggling
											innovations of the last
											decade. Cloud computing has revolutionized the world of information
											technology.</p>
									</div>
									<a href="single-post.html" class="text-decoration-underline">Read More</a>
								</article>
							</div>
							<div class="col-lg-6">
								<article class="post-item pb-5">
									<div class="post-meta d-flex gap-3 my-4">
										<span class="post-category">
											<svg width="16" height="16" viewBox="0 0 24 24">
												<use xlink:href="#folder"></use>
											</svg>
											Business </span>
										<span class="meta-day">
											<svg width="16" height="16" viewBox="0 0 24 24">
												<use xlink:href="#clock"></use>
											</svg>12-03-2021 </span>
									</div>
									<div class="post-image">
										<img src="images/post-image2.jpg" alt="image" class="post-grid-image img-fluid">
									</div>
									<div class="post-content">
										<h3 class="post-title my-4">
											<a href="single-post.html">6 Ways to Improve Your Emotional Health And
												Maintain A Balanced
												Life</a>
										</h3>
										<p>Business migration into the cloud has been one of the most boggling
											innovations of the last
											decade. Cloud computing has revolutionized the world of information
											technology.</p>
									</div>
									<a href="single-post.html" class="text-decoration-underline">Read More</a>
								</article>
							</div>
						</div> -->

					</div>
				</div>
			</div>
		</main>

	</div>

	<script src="js/jquery-1.11.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
		crossorigin="anonymous"></script>
	<script src="js/plugins.js"></script>
	<script src="js/script.js"></script>
</body>

</html>